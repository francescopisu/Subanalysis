<!-- load in D3 and Chart constructor scripts -->
<script src="chart.js"></script>
<script src="http://d3js.org/d3.v4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<style>

 .bar{
    /* fill: steelblue; */
  }

  .bar:hover{
    fill: brown;
  }

  .series_line{
    opacity: 0.2;
    pointer-events:none;
  }

  .season_line{
    fill: black;
    opacity: 0.15;
    pointer-events: none;
  }

  .axis {
    font: 10px sans-serif;
  }

  .x-axis {
    font: 9px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  div.tooltip {
  position: absolute;
  text-align: center;
  width: 150px;
  height: 55px;
  padding: 2px;
  font: 12px sans-serif;
  background: lightsteelblue;
  border: 0px;
  border-radius: 8px;
  pointer-events: none;
}

</style>

<body>
<!-- here's the div our chart will be injected into -->
<div id="container" class="chart-container">
  <svg preserveAspectRatio="xMidYMid meet" id = "svgY"></svg>
  <svg preserveAspectRatio="xMidYMid meet" id = "svgChart"></svg>
</div>

<input type="radio" name="zoomLevel" id="series_data" value="1" checked> Series </input>
<br>
<input type="radio" name="zoomLevel" id="seasons_data" value="2"> Seasons </input>
<br>
<input type="radio" name="zoomLevel" id="episodes_data" value="3"> Episodes </input>

</body>

<script>
var url_data = "https://raw.githubusercontent.com/francescopisu/subanalysis/master/data.json"
var url_sample = "https://raw.githubusercontent.com/francescopisu/subanalysis/master/sample.json"

d3.json(url_data, function(error, json_data) {
    // TUTTO IL CODICE VA QUA DENTRO
    // altrimenti javascript fa cose asincrone e si sminchia tutto,
    // cio√® fa operazione senza aver letto i dati

    if (error) throw error;

    const chart = new Chart({
        element: document.querySelector('.chart-container'),
        data: json_data
    });

    $('input[name="zoomLevel"]').on('change', function (e) {
            chart.getZoomLevel(e.target.value, chart) })
})


</script>

<!-- load in D3 and Chart constructor scripts -->
<script src="chart.js"></script>
<script src="http://d3js.org/d3.v4.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="style.css" />
<body>


<!-- Inizio series tooltip -->
<div class="dummy dummy-text">
  <span id="series-tooltip" class="tooltip tooltip-effect-1">
  <span class="series tooltip-content clearfix">
    <img class="series-poster" src="" />
    <span class="tooltip-text">
      <span class="series-number"></span>
      <span class="series-name"></span>
      <div class="series-info"></div>
      <div class="series-summary"></div>
      <div class="series-avg-wh"></div>
    </span>
  </span>
</span>
</div>
<!-- Fine series tooltip -->

<!-- Inizio season tooltip -->
<div class="dummy dummy-text">
  <span id="season-tooltip" class="tooltip tooltip-effect-1">
  <span class="season tooltip-content clearfix">
    <span class="tooltip-text">
      <span class="series-name"> </span>
      <span class="season-info"></span>
      <div class="season-avg-wh"></div>
    </span>
  </span>
</span>
</div>
<!-- Fine season tooltip -->

<!-- Inizio episode tooltip -->
<div class="dummy dummy-text">
  <span id="episode-tooltip" class="tooltip tooltip-effect-1">
  <span class="episode tooltip-content clearfix">
    <span class="tooltip-text">
      <span class="series-name"> </span>
      <span class="episode-number"> </span>
      <span class="episode-title"></span>
      <div class="episode-info"></div>
      <div class="episode-summary"></div>
      <span class="episode-wh"></span>
    </span>
  </span>
</span>
</div>
<!-- Fine episode tooltip -->

<!-- here's the div our chart will be injected into -->

<div class="wrapper">

  <div class="interaction-menu">
  <input type="radio" name="zoomLevel" value="1" id="series_data" class="form-radio" checked><label for="radio-one">Series</label>
  <input type="radio" name="zoomLevel" value="2" id="seasons_data" class="form-radio"><label for="radio-one">Seasons</label>
  <input type="radio" name="zoomLevel" value="3" id="episodes_data" class="form-radio"><label for="radio-one">Episodes</label>


  </div>

  <div class="chart-container">
    <svg id = "svgChart"></svg>
  </div>
</div>

</body>

<script>
var url_data = "https://raw.githubusercontent.com/francescopisu/subanalysis/master/data.json"
var url_sample = "https://raw.githubusercontent.com/francescopisu/subanalysis/master/sample.json"

d3.json(url_data, function(error, json_data) {
    // TUTTO IL CODICE VA QUA DENTRO
    // altrimenti javascript fa cose asincrone e si sminchia tutto,
    // cio√® fa operazione senza aver letto i dati

    if (error) throw error;

    const chart = new Chart({
        element: document.querySelector('.chart-container'),
        data: json_data,
    });

    $('input[name="zoomLevel"]').on('change', function (e) {
            // set the chosen zoomLevel via radio buttons
            chart.zoomLevel = Number(e.target.value);
            chart.changeData(chart) })

    // $('select[name="values"]').on('change', function (e) {
    //         // set the chosen zoomLevel via radio buttons
    //         chart.dropDown(chart, e) })
    $(window).resize(function() {
      chart.animation = false;
      chart.width = window.innerWidth
      chart.height = window.innerHeight
      chart.clear()
      chart.draw()
    });
})


</script>
